{
    "properties": {
        "format": "xml",
        "value": "<policies>\n  <inbound>\n    <base />\n\n    <!-- Rate limiting: 60 calls per minute per subscription -->\n    <rate-limit-by-key calls=\"60\" renewal-period=\"60\" counter-key=\"@(context.Subscription?.Id ?? context.Request.IpAddress)\" />\n\n    <!-- Ensure a request ID exists -->\n    <set-header name=\"X-Request-Id\" exists-action=\"override\">\n      <value>@(context.Request.Headers.ContainsKey(\"X-Request-Id\")\n        ? context.Request.Headers[\"X-Request-Id\"].First()\n        : context.RequestId.ToString())</value>\n    </set-header>\n\n    <!-- Forward client IP -->\n    <set-header name=\"X-Forwarded-For\" exists-action=\"override\">\n      <value>@(context.Request.IpAddress)</value>\n    </set-header>\n  </inbound>\n\n  <backend>\n    <base />\n  </backend>\n\n  <outbound>\n    <base />\n    <set-header name=\"X-Request-Id\" exists-action=\"override\">\n      <value>@(context.RequestId.ToString())</value>\n    </set-header>\n  </outbound>\n\n  <on-error>\n    <base />\n  </on-error>\n</policies>"
    }
}